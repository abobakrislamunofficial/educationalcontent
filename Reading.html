<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>شرائح درس تفاعلية: القراءة المركزة</title>
    
    <style>
        /* --- Google Font --- */
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap');

        /* --- CSS Variables for easy theme management --- */
        :root {
            --primary-color: #007bff;
            --secondary-color: #6c757d;
            --background-color: #f4f7fc;
            --slide-background: #ffffff;
            --text-color: #343a40;
            --highlight-color: #ffc107;
            --success-color: #28a745;
            --danger-color: #dc3545;
            --border-radius: 12px;
            --transition-speed: 0.4s;
        }

        /* --- General Body Styles --- */
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            margin: 0;
            line-height: 1.8;
            transition: background-color var(--transition-speed);
        }

        /* --- Presentation Container (Desktop View) --- */
        .presentation-container {
            width: 90vw;
            height: 90vh;
            max-width: 1200px;
            max-height: 750px;
            background-color: var(--slide-background);
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
            margin: 5vh auto; /* Center on desktop */
        }
        
        /* --- Utility class for desktop view centering --- */
        body.desktop-view {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
        }

        /* --- Slide Styling --- */
        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            padding: 40px 60px;
            opacity: 0;
            visibility: hidden;
            transition: opacity var(--transition-speed) ease-in-out, transform var(--transition-speed) ease-in-out;
            transform: translateY(15px);
            box-sizing: border-box;
            overflow-y: auto; /* Allow scrolling for content-heavy slides */
            display: flex; /* Using flexbox for better alignment */
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .slide.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .slide-content {
            width: 100%;
            max-width: 900px; /* Control max content width for readability */
        }
        
        /* --- Typography --- */
        h1 { color: var(--primary-color); font-size: 3em; margin-bottom: 15px; }
        h2 { font-size: 2.5em; color: var(--primary-color); margin-bottom: 30px; }
        h3 { font-size: 1.5em; color: var(--secondary-color); font-weight: 400; margin-bottom: 1rem; }
        .icon { margin-left: 15px; vertical-align: middle; }

        /* --- Component Styles --- */
        .test-paper { background: #fff; border: 1px solid #ddd; padding: 20px 30px; border-radius: var(--border-radius); text-align: right; box-shadow: 0 2px 5px rgba(0,0,0,0.05); max-width: 700px; margin: 20px auto; }
        .test-paper ol { padding-right: 20px; }
        
        .highlight { background-color: var(--highlight-color); color: #333; padding: 5px 10px; border-radius: 5px; }
        .summary { margin-top: 30px; font-size: 1.2em; font-weight: bold; }

        .objectives-list { list-style: none; padding: 0; max-width: 600px; margin: 0 auto; text-align: right; }
        .objectives-list li { background-color: #f8f9fa; padding: 15px; margin-bottom: 10px; border-radius: var(--border-radius); border-right: 4px solid var(--primary-color); font-size: 1.2em; }

        .steps-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 30px; }
        .step { background-color: #f8f9fa; padding: 20px; border-radius: var(--border-radius); border-bottom: 4px solid var(--primary-color); }
        .step h3 { color: var(--primary-color); font-size: 1.3em; margin-top: 0; }

        .text-box { background-color: #f8f9fa; padding: 20px; border-radius: var(--border-radius); margin-bottom: 20px; font-size: 1.1em; text-align: right; }
        .interactive-step { font-size: 1.1em; margin: 10px auto; padding: 15px; background: #e9ecef; border-radius: var(--border-radius); max-width: 80%; text-align: right; transition: all 0.3s; }
        
        .task-box { text-align: right; border: 2px dashed var(--primary-color); padding: 20px; border-radius: var(--border-radius); margin-bottom: 20px; }
        .timer-container { margin-top: 20px; }
        #timer { font-size: 3em; font-weight: 700; color: var(--primary-color); }

        .interactive-button { background-color: var(--primary-color); color: #fff; border: none; padding: 12px 25px; border-radius: 25px; font-size: 1.1em; cursor: pointer; transition: background-color 0.3s, transform 0.2s; margin-top: 20px; }
        .interactive-button:hover { background-color: #0056b3; transform: translateY(-2px); }
        .interactive-button:disabled { background-color: #ccc; cursor: not-allowed; transform: translateY(0); }

        /* --- Navigation Controls --- */
        .navigation-controls { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); width: 90%; display: flex; justify-content: space-between; z-index: 1000; }
        .navigation-controls button { background-color: var(--secondary-color); color: #fff; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-size: 1em; transition: background-color 0.3s; }
        .navigation-controls button:hover:not(:disabled) { background-color: #5a6268; }
        .navigation-controls button:disabled { background-color: #e9ecef; color: #aaa; cursor: not-allowed; }

        /* --- Mobile Responsive Styles --- */
        @media (max-width: 768px) {
            body { height: auto; }
            .presentation-container { width: 100%; height: 100%; min-height: 100vh; margin: 0; border-radius: 0; box-shadow: none; }
            .slide { padding: 30px 20px; min-height: calc(100vh - 80px); /* Leave space for nav */ }
            h1 { font-size: 2.2em; }
            h2 { font-size: 1.8em; }
            h3 { font-size: 1.2em; }
            .test-paper { padding: 15px; }
            .steps-container { grid-template-columns: 1fr; }

            .navigation-controls {
                position: fixed; /* Stick to bottom */
                bottom: 0;
                left: 0;
                width: 100%;
                transform: none;
                background-color: rgba(255, 255, 255, 0.98);
                backdrop-filter: blur(5px);
                padding: 10px;
                box-sizing: border-box;
                border-top: 1px solid #ddd;
                z-index: 1000;
            }
            .navigation-controls button { padding: 12px 18px; font-size: 1.1em; }
        }
    </style>
</head>
<body class="desktop-view">

    <main class="presentation-container" role="application" aria-label="عرض تقديمي تفاعلي">
        <!-- Slide 1: Title -->
        <section class="slide" role="group" aria-label="شريحة 1 من 11: صفحة العنوان">
            <div class="slide-content">
                <h1>الوحدة التدريبية الثالثة: الكفاية القرائية</h1>
                <h3>القراءة المركزة للاستذكار</h3>
            </div>
        </section>

        <!-- Slide 2: The Hook -->
        <section class="slide" role="group" aria-label="شريحة 2 من 11: تحدي القارئ الماهر">
            <div class="slide-content">
                <h2><span class="icon">🎯</span> تحدي القارئ الماهر</h2>
                <article class="test-paper">
                    <p><strong>التعليمات:</strong> اقرأ جميع الأسئلة قبل أن تبدأ الإجابة، ثم أجب عما يُطلب منك بدقة.</p>
                    <ol>
                        <li>اكتب اسمك الثلاثي هنا: .....................</li>
                        <li>سجل هنا اسم آخر كتاب قرأته: .....................</li>
                        <li>سجل هنا اسم الشخصية الأكثر تأثيرًا في حياتك: .....................</li>
                        <li>قل بصوت عالٍ: أنا قارئ ماهر.</li>
                        <li>قف ثم اجلس، وكرر العمل ثلاث مرات.</li>
                        <li>المطلوب منك أن تجيب عن السؤال الثالث فقط.</li>
                    </ol>
                </article>
            </div>
        </section>

        <!-- Slide 3: Question -->
        <section class="slide" role="group" aria-label="شريحة 3 من 11: سؤال للمناقشة">
             <div class="slide-content">
                <h2><span class="icon">🤔</span> لحظة، لماذا لم ينتبه الكثيرون للتعليمة الأخيرة؟</h2>
            </div>
        </section>

        <!-- Slide 4: Discussion -->
        <section class="slide" role="group" aria-label="شريحة 4 من 11: تحليل الأسباب">
             <div class="slide-content">
                <h2>تحليل الأسباب</h2>
                <ul>
                    <li>التسرع في القراءة؟</li>
                    <li>التركيز على المهام بدلاً من التعليمات؟</li>
                    <li class="highlight">القراءة السطحية؟</li>
                </ul>
                <p class="summary">هذا هو الفرق بين القراءة العادية والقراءة الواعية التي سنتعلمها اليوم.</p>
            </div>
        </section>
        
        <!-- Slide 5: Objectives -->
        <section class="slide" role="group" aria-label="شريحة 5 من 11: أهداف الدرس">
            <div class="slide-content">
                <h2><span class="icon">🗺️</span> أهداف الدرس</h2>
                <p style="font-size: 1.2em; margin-bottom: 20px;">يتوقع في نهاية هذا الدرس أن نكون قادرين على:</p>
                <ul class="objectives-list">
                    <li>أن نميّز بين القراءة السطحية والقراءة المركزة.</li>
                    <li>أن نعدد الخطوات الخمس للقراءة المتعمقة.</li>
                    <li>أن نطبق هذه الخطوات على نص.</li>
                </ul>
            </div>
        </section>

        <!-- Slide 6: The 5 Steps -->
        <section class="slide" role="group" aria-label="شريحة 6 من 11: الخطوات الخمس للقراءة">
            <div class="slide-content">
                <h2><span class="icon">🛠️</span> المهارة الأساسية: الخطوات الخمس للقراءة المتعمقة</h2>
                <div class="steps-container">
                    <div class="step"><h3><span class="icon">🔭</span> 1. استطلع</h3><p>ألقِ نظرة سريعة لتحديد الفكرة الرئيسية.</p></div>
                    <div class="step"><h3><span class="icon">❓</span> 2. اسأل</h3><p>حوّل الفكرة إلى سؤال واضح.</p></div>
                    <div class="step"><h3><span class="icon">📖</span> 3. اقرأ</h3><p>ابحث بتركيز عن إجابة سؤالك.</p></div>
                    <div class="step"><h3><span class="icon">✍️</span> 4. أجب</h3><p>أجب عن السؤال من ذاكرتك أولاً.</p></div>
                    <div class="step"><h3><span class="icon">✅</span> 5. راجع</h3><p>قارن إجابتك بالنص للتأكد من صحتها.</p></div>
                </div>
            </div>
        </section>

        <!-- Slide 7: Guided Practice -->
        <section class="slide" role="group" aria-label="شريحة 7 من 11: تطبيق موجه">
            <div class="slide-content">
                 <h2><span class="icon">👥</span> التطبيق الأول: لنطبق الخطوات معًا</h2>
                 <blockquote class="text-box">
                    <p>"ومن الأخلاق السيئة مغالبة الرجل على كلامه والاعتراض فيه والقطع عليه، أو إذا حدث حديثًا تعرفه أخذت تسابقه إليه، وتقتحمه عليه، وتشاركه فيه، حتى كأنك تظهر للناس بأنك تريد أن يعلموا أنك عالم مثل الذي يعلم..."</p>
                 </blockquote>
                 <div id="guided-steps">
                    <!-- Steps will be revealed by JavaScript -->
                 </div>
                 <button class="interactive-button" id="next-step-btn">ابدأ التطبيق</button>
            </div>
        </section>

        <!-- Slide 8: Group Work -->
        <section class="slide" role="group" aria-label="شريحة 8 من 11: نشاط تعاوني">
            <div class="slide-content">
                <h2><span class="icon">⏱️</span> نشاط تعاوني</h2>
                <div class="task-box">
                    <ol>
                        <li>كل مجموعة تفتح الكتاب على الصفحة 119 (نص: لماذا توقيت مكة المكرمة؟).</li>
                        <li>طبقوا الخطوات الخمس على "الفكرة الرئيسة الأولى" فقط.</li>
                        <li>عبئوا خانات "السؤال" و "الإجابة" في الكتاب.</li>
                    </ol>
                </div>
                <div class="timer-container">
                    <div id="timer">10:00</div>
                    <button class="interactive-button" id="start-timer-btn">ابدأ المؤقت</button>
                </div>
            </div>
        </section>
        
        <!-- Slide 9: Closing -->
        <section class="slide" role="group" aria-label="شريحة 9 من 11: إغلاق الدرس">
            <div class="slide-content">
                <h2><span class="icon">🎣</span> الإغلاق: لنجمع ما تعلمناه</h2>
                <p>بناءً على ما تعلمناه، كيف يمكننا ملء هذا المخطط من الكتاب (صـ 139)؟</p>
                <figure>
                    <img src="https://i.imgur.com/3c8EIOy.png" alt="مخطط هيكل السمكة يوضح أسباب المشكلة وحلولها" style="max-width: 90%; border-radius: 8px; margin-top: 20px;">
                    <figcaption>مخطط هيكل السمكة لتحليل النصوص</figcaption>
                </figure>
            </div>
        </section>

        <!-- Slide 10: Homework -->
        <section class="slide" role="group" aria-label="شريحة 10 من 11: الواجب المنزلي">
            <div class="slide-content">
                <h2><span class="icon">🏠</span> الواجب المنزلي</h2>
                <div class="task-box">
                    <h3>تطبيق وتثبيت للمهارة</h3>
                    <p>أكمل تحليل نص <strong>"لماذا توقيت مكة المكرمة؟"</strong> في الكتاب <strong>صـ 119</strong>.</p>
                    <p>طبق الخطوات الخمس على الفكرتين المتبقيتين.</p>
                </div>
            </div>
        </section>

        <!-- Slide 11: The End -->
        <section class="slide" role="group" aria-label="شريحة 11 من 11: شكر ونهاية">
            <div class="slide-content">
                <h1>شكرًا لكم أيها القراء الماهرون!</h1>
                <h3>هل لديكم أي أسئلة؟</h3>
            </div>
        </section>

        <!-- Navigation -->
        <nav class="navigation-controls">
            <button id="prev-btn" aria-label="الشريحة السابقة">السابق</button>
            <button id="next-btn" aria-label="الشريحة التالية">التالي</button>
        </nav>
    </main>

    <script>
        // Self-invoking function to avoid polluting the global scope
        (function() {
            // --- DOM Element Selection ---
            const slides = document.querySelectorAll('.slide');
            const nextBtn = document.getElementById('next-btn');
            const prevBtn = document.getElementById('prev-btn');
            const body = document.body;
            let currentSlide = 0;

            /**
             * Shows a specific slide by index.
             * @param {number} index - The index of the slide to show.
             */
            function showSlide(index) {
                // Remove 'active' class from all slides
                slides.forEach((slide, i) => {
                    slide.classList.toggle('active', i === index);
                    slide.setAttribute('aria-hidden', i !== index);
                });
                
                currentSlide = index;
                updateNavButtons();

                // On mobile, scroll to top of the slide content
                if (isMobile()) {
                    const container = document.querySelector('.presentation-container');
                    if(container) container.scrollTop = 0;
                }
            }

            /**
             * Updates the state (enabled/disabled) of navigation buttons.
             */
            function updateNavButtons() {
                prevBtn.disabled = currentSlide === 0;
                nextBtn.disabled = currentSlide === slides.length - 1;
            }

            /**
             * Navigates to the next slide.
             */
            function next() {
                if (currentSlide < slides.length - 1) {
                    showSlide(currentSlide + 1);
                }
            }

            /**
             * Navigates to the previous slide.
             */
            function prev() {
                if (currentSlide > 0) {
                    showSlide(currentSlide - 1);
                }
            }

            /**
             * Handles keyboard navigation (ArrowLeft and ArrowRight).
             * @param {KeyboardEvent} event - The keyboard event object.
             */
            function handleKeyDown(event) {
                if (event.key === 'ArrowRight') {
                    next();
                } else if (event.key === 'ArrowLeft') {
                    prev();
                }
            }

            /**
             * Checks if the current view is mobile.
             * @returns {boolean} - True if window width is <= 768px.
             */
            const isMobile = () => window.innerWidth <= 768;

            /**
             * Toggles a body class based on viewport size for CSS adjustments.
             */
            function updateBodyClass() {
                body.classList.toggle('desktop-view', !isMobile());
            }

            /**
             * Initializes all interactive elements like timers and step-by-step guides.
             */
            function setupInteractiveElements() {
                setupGuidedPractice();
                setupTimer();
            }

            /**
             * Sets up the step-by-step guided practice functionality.
             */
            function setupGuidedPractice() {
                const nextStepBtn = document.getElementById('next-step-btn');
                const guidedStepsContainer = document.getElementById('guided-steps');
                if (!nextStepBtn || !guidedStepsContainer) return;

                const steps = [
                    '<strong>🔭 استطلع:</strong> الفكرة الرئيسية هي أخلاق الحوار السيئة.',
                    '<strong>❓ اسأل:</strong> (مناقشة) مثال: ما هي مظاهر مغالبة الرجل على كلامه؟',
                    '<strong>📖 اقرأ:</strong> (توجيه) ابحثوا الآن عن الإجابة في النص.',
                    '<strong>✍️ أجب:</strong> (مناقشة) ما هي الإجابة من ذاكرتكم؟',
                    '<strong>✅ راجع:</strong> الإجابة هي: الاعتراض فيه، القطع عليه، مسابقته...'
                ];
                let currentStepIndex = -1;

                nextStepBtn.addEventListener('click', () => {
                    currentStepIndex++;
                    if (currentStepIndex < steps.length) {
                        const stepElement = document.createElement('div');
                        stepElement.className = 'interactive-step';
                        stepElement.innerHTML = steps[currentStepIndex];
                        guidedStepsContainer.appendChild(stepElement);
                        nextStepBtn.textContent = "أظهر الخطوة التالية";
                    }
                    
                    if (currentStepIndex >= steps.length - 1) {
                        nextStepBtn.textContent = "اكتمل التطبيق!";
                        nextStepBtn.disabled = true;
                    }
                });
            }

            /**
             * Sets up the countdown timer functionality.
             */
            function setupTimer() {
                const startTimerBtn = document.getElementById('start-timer-btn');
                const timerDisplay = document.getElementById('timer');
                if (!startTimerBtn || !timerDisplay) return;

                let timerInterval;
                const DURATION_SECONDS = 10 * 60;

                startTimerBtn.addEventListener('click', () => {
                    if (startTimerBtn.disabled) return;
                    startTimerBtn.disabled = true;
                    
                    let timeRemaining = DURATION_SECONDS;

                    timerInterval = setInterval(() => {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        let seconds = timeRemaining % 60;
                        seconds = (seconds < 10) ? '0' + seconds : seconds;
                        timerDisplay.textContent = `${minutes}:${seconds}`;

                        if (timeRemaining <= 0) {
                            clearInterval(timerInterval);
                            timerDisplay.textContent = "انتهى الوقت!";
                            timerDisplay.style.color = "var(--danger-color)";
                        }
                    }, 1000);
                });
            }

            /**
             * Main initialization function.
             */
            function init() {
                // Add event listeners
                nextBtn.addEventListener('click', next);
                prevBtn.addEventListener('click', prev);
                document.addEventListener('keydown', handleKeyDown);
                window.addEventListener('resize', updateBodyClass);
                
                // Initial setup
                updateBodyClass();
                setupInteractiveElements();
                showSlide(0);
            }

            // Run initialization when the DOM is fully loaded
            document.addEventListener('DOMContentLoaded', init);
        })();
    </script>

</body>
</html>